(this.webpackJsonpfinalproject=this.webpackJsonpfinalproject||[]).push([[0],{100:function(t,e,n){},220:function(t,e,n){"use strict";n.r(e);var c=n(0),a=n(1),i=n.n(a),r=n(41),o=n.n(r),s=(n(99),n(100),n(9)),j=n.p+"static/media/janch_logo.7c73f6a7.png";function u(){return Object(c.jsx)("nav",{className:"navbar",children:Object(c.jsxs)("div",{className:"nav-center",children:[Object(c.jsxs)(s.b,{to:"/",children:[" ",Object(c.jsx)("img",{src:j,alt:"logo",className:"logo"})]}),Object(c.jsx)("ul",{className:"nav-links",children:Object(c.jsxs)("li",{children:[" ",Object(c.jsx)(s.b,{to:"/login",children:"Logout"})]})})]})})}n(108);function l(t){return Object(c.jsxs)("div",{children:[Object(c.jsx)(u,{}),"chat"]})}function b(){return Object(c.jsxs)("div",{children:[Object(c.jsx)(u,{}),Object(c.jsx)("h1",{children:"hi from homepage"}),Object(c.jsxs)("ul",{children:[Object(c.jsx)(s.b,{to:"/dashboard",children:Object(c.jsx)("li",{children:"dashboard"})}),Object(c.jsx)("li",{children:Object(c.jsx)(s.b,{to:"/chat",children:Object(c.jsx)("li",{children:"Chat"})})}),Object(c.jsx)("li",{children:Object(c.jsx)(s.b,{to:"/videochat",children:Object(c.jsx)("li",{children:"Video Chat"})})})]})]})}function d(){return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"hi from login page"}),Object(c.jsx)("br",{}),Object(c.jsx)(s.b,{to:"/",children:"Login in!"})]})}function h(){return Object(c.jsxs)("div",{children:[Object(c.jsx)(u,{}),Object(c.jsx)("h1",{children:"hi from dashboard"}),Object(c.jsx)(s.b,{to:"/chat",children:"Chat"})]})}var O=n(44),f=n.n(O),x=n(92),m=n(13),p=function(t){var e=t.username,n=t.handleUsernameChange,a=t.roomName,i=t.handleRoomNameChange,r=t.handleSubmit;return Object(c.jsxs)("form",{onSubmit:r,children:[Object(c.jsx)("h2",{children:"Enter a room"}),Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{htmlFor:"name",children:"Name:"}),Object(c.jsx)("input",{type:"text",id:"field",value:e,onChange:n,required:!0})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{htmlFor:"room",children:"Room name:"}),Object(c.jsx)("input",{type:"text",id:"room",value:a,onChange:i,required:!0})]}),Object(c.jsx)("button",{type:"submit",children:"Submit"})]})},v=n(23),g=n(93),k=n.n(g),C=function(t){var e=t.participant,n=Object(a.useState)([]),i=Object(m.a)(n,2),r=i[0],o=i[1],s=Object(a.useState)([]),j=Object(m.a)(s,2),u=j[0],l=j[1],b=Object(a.useRef)(),d=Object(a.useRef)(),h=function(t){return Array.from(t.values()).map((function(t){return t.track})).filter((function(t){return null!==t}))};return Object(a.useEffect)((function(){o(h(e.videoTracks)),l(h(e.audioTracks));return e.on("trackSubscribed",(function(t){"video"===t.kind?o((function(e){return[].concat(Object(v.a)(e),[t])})):"audio"===t.kind&&l((function(e){return[].concat(Object(v.a)(e),[t])}))})),e.on("trackUnsubscribed",(function(t){"video"===t.kind?o((function(e){return e.filter((function(e){return e!==t}))})):"audio"===t.kind&&l((function(e){return e.filter((function(e){return e!==t}))}))})),function(){o([]),l([]),e.removeAllListeners()}}),[e]),Object(a.useEffect)((function(){var t=r[0];if(t)return t.attach(b.current),function(){t.detach()}}),[r]),Object(a.useEffect)((function(){var t=u[0];if(t)return t.attach(d.current),function(){t.detach()}}),[u]),Object(c.jsxs)("div",{className:"participant",children:[Object(c.jsx)("h3",{children:e.identity}),Object(c.jsx)("video",{ref:b,autoPlay:!0}),Object(c.jsx)("audio",{ref:d,autoPlay:!0,muted:!0})]})},N=function(t){var e=t.roomName,n=t.token,i=t.handleLogout,r=Object(a.useState)(null),o=Object(m.a)(r,2),s=o[0],j=o[1],u=Object(a.useState)([]),l=Object(m.a)(u,2),b=l[0],d=l[1],h=b.map((function(t){return Object(c.jsx)(C,{participant:t},t.sid)}));return Object(a.useEffect)((function(){var t=function(t){d((function(e){return[].concat(Object(v.a)(e),[t])}))},c=function(t){d((function(e){return e.filter((function(e){return e!==t}))}))};return k.a.connect(n,{name:e}).then((function(e){j(e),e.on("participantConnected",t),e.on("participantDisconnected",c),e.participants.forEach(t)})),function(){j((function(t){return t&&"connected"===t.localParticipant.state?(t.localParticipant.tracks.forEach((function(t){t.track.stop()})),t.disconnect(),null):t}))}}),[e,n]),Object(c.jsxs)("div",{className:"room",children:[Object(c.jsxs)("h2",{children:["Room: ",e]}),Object(c.jsx)("button",{onClick:i,children:"Log out"}),Object(c.jsx)("div",{className:"local-participant",children:s?Object(c.jsx)(C,{participant:s.localParticipant},s.localParticipant.sid):""}),Object(c.jsx)("h3",{children:"Remote Participants"}),Object(c.jsx)("div",{className:"remote-participants",children:h})]})},S=function(){var t=Object(a.useState)(""),e=Object(m.a)(t,2),n=e[0],i=e[1],r=Object(a.useState)(""),o=Object(m.a)(r,2),s=o[0],j=o[1],u=Object(a.useState)(null),l=Object(m.a)(u,2),b=l[0],d=l[1],h=Object(a.useCallback)((function(t){i(t.target.value)}),[]),O=Object(a.useCallback)((function(t){j(t.target.value)}),[]),v=Object(a.useCallback)(function(){var t=Object(x.a)(f.a.mark((function t(e){var c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.next=3,fetch("/videochat/video/token",{method:"POST",body:JSON.stringify({identity:n,room:s}),headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()}));case 3:c=t.sent,d(c.token);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[n,s]),g=Object(a.useCallback)((function(t){d(null)}),[]);return b?Object(c.jsx)(N,{roomName:s,token:b,handleLogout:g}):Object(c.jsx)(p,{username:n,roomName:s,handleUsernameChange:h,handleRoomNameChange:O,handleSubmit:v})},y=n(4);var P=function(){return Object(c.jsx)("div",{className:"app",children:Object(c.jsx)(s.a,{children:Object(c.jsxs)(y.c,{children:[Object(c.jsx)(y.a,{exact:!0,path:"/",component:b}),Object(c.jsx)(y.a,{exact:!0,path:"/login",component:d}),Object(c.jsx)(y.a,{exact:!0,path:"/dashboard",component:h}),Object(c.jsx)(y.a,{exact:!0,path:"/chat",component:l}),Object(c.jsx)(y.a,{exact:!0,path:"/videochat",component:S})]})})})},E=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,221)).then((function(e){var n=e.getCLS,c=e.getFID,a=e.getFCP,i=e.getLCP,r=e.getTTFB;n(t),c(t),a(t),i(t),r(t)}))};o.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(P,{})}),document.getElementById("root")),E()},99:function(t,e,n){}},[[220,1,2]]]);
//# sourceMappingURL=main.ab540c82.chunk.js.map